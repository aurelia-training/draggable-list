{"version":3,"sources":["app.ts","draggable-list.ts","environment.ts","main.ts","resources/index.ts","list-generator.ts","/home/jon/Documents/github/aurelia-training/draggable-list/src/app.html","/home/jon/Documents/github/aurelia-training/draggable-list/src/draggable-list.html","/home/jon/Documents/github/aurelia-training/draggable-list/src/style.css","/home/jon/Documents/github/aurelia-training/draggable-list/src/draggable-list.css"],"names":[],"mappings":";;;IAAA;QAAA;YACE,WAAM,GAAU,QAAQ,CAAC;QAC3B,CAAC;QAAD,UAAC;IAAD,CAFA,AAEC,IAAA;IAFY,kBAAG;;;;;;;;;;;;;;;ICGhB;QAAA;YAIE,kBAAa,GAAiB,IAAI,8BAAa,EAAE,CAAC;QAsDpD,CAAC;QAnDC,gCAAQ,GAAR;YACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;QAC9D,CAAC;QAED,qCAAa,GAAb,UAAc,QAAQ,EAAE,QAAQ;YAC9B,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;gBAAC,MAAM,CAAC;YACtB,EAAE,CAAA,CAAC,CAAC,8BAAa,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3E,EAAE,CAAA,CAAC,OAAO,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBAC1B,CAAC;YACH,CAAC;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;QAEM,8BAAgB,GAAvB,UAAwB,KAAgB;YACtC,IAAI,YAAY,GAAkB,QAAQ,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC;YAClF,IAAI,eAAe,GAAU,GAAG,CAAC;YACjC,IAAI,YAAY,GAAU,CAAC,CAAC,CAAC;YAC7B,GAAG,CAAA,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;gBACxD,EAAE,CAAA,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAAC,GAAG,eAAe,CAAC,CAAC,CAAC;oBAC/F,YAAY,GAAG,KAAK,CAAC;oBACrB,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAAC,CAAC;gBAC9F,CAAC;YACH,CAAC;YACD,IAAI,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC3B,EAAE,CAAA,CAAC,YAAY,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC,CAAC;gBAC9C,IAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC;gBAC1B,IAAI,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;gBACjE,IAAI,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;gBACrE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC7D,KAAK,CAAC,oBAAoB,GAAG,YAAY,CAAC;YAC5C,CAAC;QACH,CAAC;QACM,4BAAc,GAArB;YACE,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,aAAa,CAAC,gBAAgB,CAAC,CAAC;YAC1E,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAC,cAAc,CAAC,CAAC;YACtE,QAAQ,CAAC,KAAK,CAAC,oBAAoB,GAAG,CAAC,CAAC,CAAC;QAC3C,CAAC;QACD,8BAAM,GAAN,UAAO,KAAK;YACV,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,aAAa,CAAC,gBAAgB,CAAC,CAAC;YACvE,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,aAAa,CAAC,cAAc,CAAC,CAAC;YACnE,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;QACpC,CAAC;QACD,gCAAQ,GAAR,UAAS,QAAe;YACtB,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAClE,CAAC;QACD,iCAAS,GAAT;YACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;QAC9D,CAAC;QAEH,oBAAC;IAAD,CA1DA,AA0DC,IAAA;IAxDW;QAAT,4BAAQ;;iDAAe;IAFb,sCAAa;;;;;;ICH1B,kBAAe;QACb,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,IAAI;KACd,CAAC;;;;;;ICEI,OAAQ,CAAC,MAAM,CAAC;QACpB,QAAQ,EAAE;YACR,gBAAgB,EAAE,KAAK;SACxB;KACF,CAAC,CAAC;IAEH,mBAA0B,OAAgB;QACxC,OAAO,CAAC,GAAG;aACR,qBAAqB,EAAE;aACvB,OAAO,CAAC,WAAW,CAAC,CAAC;QAExB,EAAE,CAAC,CAAC,qBAAW,CAAC,KAAK,CAAC,CAAC,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,CAAC;QACnC,CAAC;QAED,EAAE,CAAC,CAAC,qBAAW,CAAC,OAAO,CAAC,CAAC,CAAC;YACxB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACxC,CAAC;QAED,OAAO,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,cAAM,OAAA,OAAO,CAAC,OAAO,EAAE,EAAjB,CAAiB,CAAC,CAAC;IAChD,CAAC;IAdD,8BAcC;;;;;;ICvBD,mBAA0B,MAA8B;IAExD,CAAC;IAFD,8BAEC;;;;;;ICJD;QAsBE;YApBA,UAAK,GAAG;gBACN,SAAS,EAAE,EAAE;gBACb,MAAM,EAAE,EAAE;gBACV,QAAQ,EAAE,EAAE;aACb,CAAC;YAiBA,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC1D,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;YAC1D,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,UAAU,EAAE,eAAe,EAAE,cAAc,EAAE,cAAc,EAAE,aAAa,EAAE,cAAc,CAAC,CAAC;QACnH,CAAC;QAlBD,+BAAO,GAAP,UAAQ,MAAa;YACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAC5B,CAAC;QAED,gCAAQ,GAAR,UAAS,MAAa,EAAE,WAAW;YACjC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,WAAW,CAAC,KAAK,EAAE,CAAC;QAC3C,CAAC;QAEM,qBAAO,GAAd,UAAe,KAAK,EAAE,KAAK;YACzB,MAAM,CAAC,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,UAAS,OAAO,EAAE,KAAK;gBACxE,MAAM,CAAC,OAAO,KAAK,KAAK,CAAC,KAAK,CAAC,CAAC;YAClC,CAAC,CAAC,CAAC;QACL,CAAC;QAQH,oBAAC;IAAD,CA5BA,AA4BC,IAAA;IA5BY,sCAAa;;;ACA1B;ACAA;ACAA;ACAA","file":"app-bundle.js","sourcesContent":["export class App {\n  listId:string = \"people\";\n}\n","import {bindable} from \"aurelia-framework\";\nimport {ListGenerator} from \"./list-generator\";\n\nexport class DraggableList {\n\n  @bindable listId:string;\n  list:Object;\n  listGenerator:ListGenerator = new ListGenerator();\n  selectedElementIndex:number;\n\n  attached() {\n    this.list = this.listGenerator.getList(this.listId).slice();\n  }\n\n  listIdChanged(newValue, oldValue) {\n    if(!this.list) return;\n    if(!ListGenerator.compare(this.list, this.listGenerator.getList(oldValue))) {\n      if(confirm(\"Do you want to save your changes?\")) {\n        this.saveList(oldValue);\n      }\n    }\n    this.attached();\n  }\n\n  static mousemoveHandler(event:MouseEvent) {\n    let listElements:HTMLCollection = document.getElementsByClassName(\"list-element\");\n    let closestDistance:number = 1e5;\n    let closestIndex:number = -1;\n    for(let index = 0; index < listElements.length; index++) {\n      if(Math.abs(event.clientY - listElements[index].getBoundingClientRect().top) < closestDistance) {\n        closestIndex = index;\n        closestDistance = Math.abs(event.clientY - listElements[index].getBoundingClientRect().top);\n      }\n    }\n    var _this = document._this;\n    if(closestIndex != _this.selectedElementIndex) {\n      let thisList = _this.list;\n      let thisElement = thisList.splice(_this.selectedElementIndex, 1);\n      let resultList = thisList.slice(0, closestIndex).concat(thisElement);\n      _this.list = resultList.concat(thisList.slice(closestIndex));\n      _this.selectedElementIndex = closestIndex;\n    }\n  }\n  static mouseupHandler() {\n    document.removeEventListener(\"mousemove\", DraggableList.mousemoveHandler);\n    document.removeEventListener(\"mouseup\", DraggableList.mouseupHandler);\n    document._this.selectedElementIndex = -1;\n  }\n  select(index) {\n    document.addEventListener(\"mousemove\", DraggableList.mousemoveHandler);\n    document.addEventListener(\"mouseup\", DraggableList.mouseupHandler);\n    document._this = this;\n    this.selectedElementIndex = index;\n  }\n  saveList(oldValue:string) {\n    this.listGenerator.saveList(oldValue || this.listId, this.list);\n  }\n  resetList() {\n    this.list = this.listGenerator.getList(this.listId).slice();\n  }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","export class ListGenerator {\n  \n  lists = {\n    fibonacci: [],\n    people: [],\n    integers: []\n  };\n\n  getList(listId:string) {\n    return this.lists[listId];\n  }\n\n  saveList(listId:string, updatedList) {\n    this.lists[listId] = updatedList.slice();\n  }\n\n  static compare(list1, list2) {\n    return list1.length == list2.length && list1.every(function(element, index) {\n      return element === list2[index];\n    });\n  }\n\n  constructor() {\n    this.lists.fibonacci = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55];\n    this.lists.integers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n    this.lists.people = [\"John Doe\", \"Jane Peterson\", \"Maggie Ewald\", \"Adam Johnson\", \"Bob Senford\", \"Carol Tanner\"];\n  }\n\n}\n",null,null,null,null],"sourceRoot":"../src"}